---
sidebar: sidebar 
permalink: oracle/aws-ora-fsx-ec2-factors.html 
summary: 이 섹션에서는 AWS EC2 인스턴스와 FSx 스토리지에 Oracle 데이터베이스를 배포할 때 고려해야 할 요소에 대한 자세한 내용을 제공합니다. 
keywords: HA, DR, database, Oracle, RDS, AWS, SnapCenter 
---
= Oracle 데이터베이스 배포를 고려할 요소
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
퍼블릭 클라우드는 컴퓨팅 및 스토리지에 대한 다양한 선택권을 제공하며, 올바른 유형의 컴퓨팅 인스턴스와 스토리지 엔진을 사용하는 것은 데이터베이스 배포를 시작하기에 좋은 방법입니다.  또한 Oracle 데이터베이스에 최적화된 컴퓨팅 및 스토리지 구성을 선택해야 합니다.

다음 섹션에서는 FSx 스토리지가 있는 EC2 인스턴스에서 AWS 퍼블릭 클라우드에 Oracle 데이터베이스를 배포할 때 고려해야 할 주요 사항을 설명합니다.



== VM 성능

퍼블릭 클라우드에서 관계형 데이터베이스의 성능을 최적화하려면 적절한 VM 크기를 선택하는 것이 중요합니다.  더 나은 성능을 위해 NetApp 데이터베이스 워크로드에 최적화된 Oracle 배포용 EC2 M5 시리즈 인스턴스를 사용할 것을 권장합니다.  AWS에서 Oracle용 RDS 인스턴스를 구동하는 데에도 동일한 인스턴스 유형이 사용됩니다.

* 작업 부하 특성에 따라 올바른 vCPU와 RAM 조합을 선택하세요.
* VM에 스왑 공간을 추가합니다.  기본 EC2 인스턴스 배포는 스왑 공간을 생성하지 않으며, 이는 데이터베이스에 최적화되지 않았습니다.




== 저장 레이아웃 및 설정

NetApp 다음과 같은 스토리지 레이아웃을 권장합니다.

* NFS 저장소의 경우 권장되는 볼륨 레이아웃은 세 개의 볼륨입니다. 하나는 Oracle 바이너리용, 다른 하나는 Oracle 데이터와 복제된 제어 파일용, 그리고 다른 하나는 Oracle 활성 로그, 보관 로그 및 제어 파일용입니다.
+
image:aws-ora-fsx-ec2-stor-012.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

* iSCSI 스토리지의 경우 권장되는 볼륨 레이아웃은 세 개의 볼륨입니다. 하나는 Oracle 바이너리용, 다른 하나는 Oracle 데이터와 복제된 제어 파일용, 그리고 다른 하나는 Oracle 활성 로그, 보관 로그 및 제어 파일용입니다.  그러나 각 데이터 및 로그 볼륨에는 이상적으로 4개의 LUN이 포함되어야 합니다.  LUN은 HA 클러스터 노드에서 이상적으로 균형을 이룹니다.
+
image:aws-ora-fsx-ec2-stor-013.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

* 스토리지 IOPS 및 처리량의 경우, FSx 스토리지 클러스터에 대한 프로비저닝된 IOPS 및 처리량 임계값을 선택할 수 있으며, 이러한 매개변수는 작업 부하가 변경될 때마다 즉시 조정할 수 있습니다.
+
** 자동 IOPS 설정은 할당된 저장 용량 또는 사용자 정의 저장 용량(최대 80,000)의 GiB당 3 IOPS입니다.
** 처리량 수준은 다음과 같이 증가합니다: 128, 256, 512, 1024, 2045MBps.




검토하다link:https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/performance.html["Amazon FSx ONTAP 성능"^] 처리량과 IOPS 크기를 조정할 때 문서화합니다.



== NFS 구성

가장 흔한 운영체제인 Linux에는 기본 NFS 기능이 포함되어 있습니다.  Oracle은 Oracle에 기본적으로 통합된 dNFS(Direct NFS) 클라이언트를 제공합니다.  Oracle은 20년 이상 NFSv3를 지원해 왔습니다. dNFS는 모든 버전의 Oracle에서 NFSv3로 지원됩니다.  NFSv4는 NFSv4 표준을 따르는 모든 OS에서 지원됩니다. NFSv4에 대한 dNFS 지원에는 Oracle 12.1.0.2 이상이 필요합니다.  NFSv4.1에는 특정 OS 지원이 필요합니다.  지원되는 OS에 대해서는 NetApp Interoperability Matrix Tool(IMT)을 참조하세요. NFSv4.1에 대한 dNFS 지원에는 Oracle 버전 19.3.0.0 이상이 필요합니다.

NetApp 자동화 툴킷을 사용하여 Oracle을 자동으로 배포하면 NFSv3에서 dNFS가 자동으로 구성됩니다.

고려해야 할 다른 요소:

* TCP 슬롯 테이블은 호스트 버스 어댑터(HBA) 대기열 깊이와 동일한 NFS입니다.  이러한 테이블은 한 번에 처리될 수 있는 NFS 작업의 수를 제어합니다.  기본값은 일반적으로 16인데, 이는 최적의 성능을 발휘하기에는 너무 낮습니다.  반대의 문제가 최신 Linux 커널에서 발생하는데, TCP 슬롯 테이블 제한을 자동으로 늘려서 NFS 서버가 요청으로 포화 상태가 될 수 있습니다.
+
최적의 성능을 얻고 성능 문제를 방지하려면 TCP 슬롯 테이블을 제어하는 커널 매개변수를 128로 조정하세요.

+
[source, cli]
----
sysctl -a | grep tcp.*.slot_table
----
* 다음 표는 Linux NFSv3 - 단일 인스턴스에 권장되는 NFS 마운트 옵션을 보여줍니다.
+
image:aws-ora-fsx-ec2-nfs-001.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]




NOTE: dNFS를 사용하기 전에 Oracle Doc 1495104.1에 설명된 패치가 설치되어 있는지 확인하세요.  NFSv3 및 NFSv4에 대한 NetApp 지원 매트릭스에는 특정 운영 체제가 포함되어 있지 않습니다.  RFC를 준수하는 모든 OS가 지원됩니다.  온라인 IMT 에서 NFSv3 또는 NFSv4 지원을 검색할 때 특정 OS를 선택하지 마세요. 일치하는 항목이 표시되지 않습니다.  모든 OS는 일반 정책에 의해 암묵적으로 지원됩니다.



== 고가용성

솔루션 아키텍처에 표시된 대로 HA는 스토리지 수준 복제를 기반으로 구축됩니다.  따라서 Oracle의 시작과 가용성은 컴퓨팅과 스토리지를 얼마나 빨리 가동하고 복구할 수 있는지에 달려 있습니다.  다음의 주요 요소를 확인하세요.

* Ansible 병렬 업데이트를 통해 두 호스트 모두에 대기 컴퓨팅 인스턴스를 준비하고 기본 인스턴스와 동기화합니다.
* 마지막 순간에 Oracle을 설치하고 무엇을 설치하고 패치해야 할지 파악할 필요가 없도록 대기 목적으로 기본 볼륨에서 바이너리 볼륨을 복제합니다.
* 복제 빈도는 Oracle 데이터베이스를 얼마나 빨리 복구하여 서비스를 제공할 수 있는지를 결정합니다.  복제 빈도와 저장 공간 소비 사이에는 상충 관계가 있습니다.
* 자동화를 활용하여 복구하고 대기 모드로 신속하게 전환하며 인적 오류도 발생하지 않습니다.  NetApp 이러한 목적을 위해 자동화 툴킷을 제공합니다.

