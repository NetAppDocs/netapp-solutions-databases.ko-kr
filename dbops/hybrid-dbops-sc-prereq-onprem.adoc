---
sidebar: sidebar 
permalink: dbops/hybrid-dbops-sc-prereq-onprem.html 
summary: 이 섹션에 설명된 작업은 SnapCenter 하이브리드 클라우드 데이터베이스 워크로드 환경을 준비하기 위해 온프레미스에서 완료되어야 합니다. 
keywords: prerequisites, on prem, on premises, installation, security, automation 
---
= 온프레미스 전제 조건
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
SnapCenter 하이브리드 클라우드 데이터베이스 워크로드 환경을 준비하려면 다음 작업을 온프레미스에서 완료해야 합니다.



== SnapCenter 설치 및 구성

NetApp SnapCenter 도구는 일반적으로 Windows 도메인 환경에서 실행되는 Windows 기반 애플리케이션이지만 작업 그룹 배포도 가능합니다.  SnapCenter 서버라는 중앙 관리 서버와 데이터베이스 워크로드를 위한 데이터베이스 서버 호스트의 SnapCenter 플러그인을 포함하는 다계층 아키텍처를 기반으로 합니다.  하이브리드 클라우드 배포에 대한 몇 가지 주요 고려 사항은 다음과 같습니다.

* *단일 인스턴스 또는 HA 배포.*  HA 배포는 단일 SnapCenter 인스턴스 서버 장애 발생 시 중복성을 제공합니다.
* *이름 확인.*  모든 데이터베이스 호스트를 확인하려면 SnapCenter 서버에서 DNS를 구성해야 하며, 정방향 및 역방향 조회를 위해 스토리지 SVM에서도 DNS를 구성해야 합니다.  SnapCenter 서버와 스토리지 SVM을 정방향 및 역방향 조회를 위해 확인하려면 데이터베이스 서버에서 DNS도 구성해야 합니다.
* *역할 기반 액세스 제어(RBAC) 구성.*  혼합된 데이터베이스 작업 부하의 경우 RBAC를 사용하여 Oracle 데이터베이스 관리자 또는 SQL Server 관리자와 같이 서로 다른 DB 플랫폼에 대한 관리 책임을 분리할 수 있습니다.  DB 관리자 사용자에게는 필요한 권한을 부여해야 합니다.
* *정책 기반 백업 전략을 활성화합니다.*  백업의 일관성과 안정성을 강화합니다.
* *방화벽에서 필요한 네트워크 포트를 엽니다.*  온프레미스 SnapCenter 서버가 클라우드 DB 호스트에 설치된 에이전트와 통신하도록 합니다.
* *온프레미스와 퍼블릭 클라우드 간의 SnapMirror 트래픽을 허용하려면 포트가 열려 있어야 합니다.*  SnapCenter 서버는 ONTAP SnapMirror 사용하여 온사이트 스냅샷 백업을 클라우드 CVO 스토리지 SVM에 복제합니다.


신중한 사전 설치 계획 및 고려 후 여기를 클릭하세요.link:https://docs.netapp.com/us-en/snapcenter/install/requirements-to-install-snapcenter-server.html["SnapCenter 설치 사전 요구 사항"^] SnapCenter 설치 및 구성에 대한 자세한 내용은 다음을 참조하세요.



== 온프레미스 데이터베이스 서버 스토리지 구성

저장소 성능은 데이터베이스와 애플리케이션의 전반적인 성능에 중요한 역할을 합니다.  잘 설계된 스토리지 레이아웃은 DB 성능을 향상시킬 뿐만 아니라 데이터베이스 백업 및 복구를 쉽게 관리할 수 있게 해줍니다.  저장소 레이아웃을 정의할 때는 데이터베이스 크기, 데이터베이스의 예상 데이터 변경률, 백업을 수행하는 빈도 등 여러 요소를 고려해야 합니다.

가상화된 데이터베이스 작업 부하를 위해 NFS 또는 iSCSI를 통해 스토리지 LUN을 게스트 VM에 직접 연결하면 일반적으로 VMDK를 통해 할당된 스토리지보다 더 나은 성능을 제공합니다.  NetApp 다음 그림에 표시된 LUN의 대규모 SQL Server 데이터베이스에 대한 스토리지 레이아웃을 권장합니다.

image:storage-layout-sqlsvr-large.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

다음 그림은 LUN의 소규모 또는 중규모 SQL Server 데이터베이스에 대해 NetApp 권장하는 스토리지 레이아웃을 보여줍니다.

image:storage-layout-sqlsvr-smallmedium.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]


NOTE: Log 디렉토리는 SnapCenter 에서 데이터베이스 복구를 위한 트랜잭션 로그 롤업을 수행하는 데 사용됩니다.  매우 큰 데이터베이스의 경우 더 나은 성능을 위해 여러 개의 LUN을 볼륨에 할당할 수 있습니다.

Oracle 데이터베이스 워크로드의 경우 SnapCenter 물리적 또는 가상 장치로 호스트에 마운트된 ONTAP 스토리지로 지원되는 데이터베이스 환경을 지원합니다.  환경의 중요성에 따라 단일 또는 여러 저장 장치에 전체 데이터베이스를 호스팅할 수 있습니다.  일반적으로 고객은 전용 스토리지의 데이터 파일을 제어 파일, 리두 파일, 보관 로그 파일 등 다른 모든 파일로부터 분리합니다.  이를 통해 관리자는 스냅샷 기술을 사용하여 몇 초에서 몇 분 내에 대규모 중요 데이터베이스(페타바이트 규모)를 신속하게 복원(ONTAP 단일 파일 SnapRestore)하거나 복제할 수 있습니다.

image:storage-layout-oracle-typical.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

대기 시간에 민감한 미션 크리티컬 워크로드의 경우, 최적의 대기 시간을 확보하기 위해 다양한 유형의 Oracle 파일에 전용 스토리지 볼륨을 배포해야 합니다.  대규모 데이터베이스의 경우 볼륨당 여러 개의 LUN(NetApp 최대 8개 권장)을 데이터 파일에 할당해야 합니다.

image:storage-layout-oracle-dedicated.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

규모가 작은 Oracle 데이터베이스의 경우 SnapCenter 여러 데이터베이스나 데이터베이스의 일부를 동일한 스토리지 볼륨이나 LUN에 호스팅할 수 있는 공유 스토리지 레이아웃을 지원합니다.  이 레이아웃의 예로, +DATA ASM 디스크 그룹이나 볼륨 그룹에 있는 모든 데이터베이스에 대한 데이터 파일을 호스팅할 수 있습니다.  나머지 파일(리두, 아카이브 로그, 제어 파일)은 다른 전용 디스크 그룹이나 볼륨 그룹(LVM)에 호스팅될 수 있습니다.  이러한 배포 시나리오는 아래에 설명되어 있습니다.

image:storage-layout-oracle-shared.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

Oracle 데이터베이스의 이전을 용이하게 하려면 Oracle 바이너리를 정기 백업 정책에 포함된 별도의 LUN에 설치해야 합니다.  이를 통해 데이터베이스를 새로운 서버 호스트로 이전하는 경우, 동기화되지 않은 Oracle 바이너리로 인한 잠재적인 문제 없이 Oracle 스택을 복구를 위해 시작할 수 있습니다.



== 라이센스 요구 사항

SnapCenter 는 NetApp 의 라이선스 소프트웨어입니다.  일반적으로 온프레미스 ONTAP 라이선스에 포함됩니다.  그러나 하이브리드 클라우드 구축의 경우 SnapCenter 에 CVO를 대상 데이터 복제 대상으로 추가하려면 SnapCenter 용 클라우드 라이선스도 필요합니다.  자세한 내용은 SnapCenter 표준 용량 기반 라이선스에 대한 다음 링크를 참조하세요.

link:https://docs.netapp.com/us-en/snapcenter/install/concept_snapcenter_standard_controller_based_licenses.html["SnapCenter 표준 용량 기반 라이선스"^]



== 네트워킹 및 보안

개발/테스트 및 재해 복구를 위해 온프레미스 프로덕션 데이터베이스를 클라우드로 버스트할 수 있는 하이브리드 데이터베이스 작업에서 네트워킹과 보안은 온프레미스 데이터 센터에서 환경을 설정하고 퍼블릭 클라우드에 연결할 때 고려해야 할 중요한 요소입니다.

퍼블릭 클라우드는 일반적으로 가상 사설 클라우드(VPC)를 사용하여 퍼블릭 클라우드 플랫폼 내의 여러 사용자를 격리합니다.  개별 VPC 내에서 보안은 VPC 잠금에 대한 사용자 요구에 따라 구성 가능한 보안 그룹과 같은 조치를 사용하여 제어됩니다.

온프레미스 데이터 센터에서 VPC로의 연결은 VPN 터널을 통해 보호할 수 있습니다.  VPN 게이트웨이에서는 NAT 및 방화벽 규칙을 사용하여 인터넷 호스트에서 회사 데이터 센터 내부의 호스트로 네트워크 연결을 설정하려는 시도를 차단함으로써 보안을 강화할 수 있습니다.

네트워킹 및 보안을 고려하려면 선택한 퍼블릭 클라우드에 대한 관련 인바운드 및 아웃바운드 CVO 규칙을 검토하세요.

* link:https://docs.netapp.com/us-en/occm/reference_security_groups.html#inbound-rules["CVO에 대한 보안 그룹 규칙 - AWS"]
* link:https://docs.netapp.com/us-en/occm/reference_networking_azure.html#outbound-internet-access["CVO에 대한 보안 그룹 규칙 - Azure"]
* link:https://docs.netapp.com/us-en/occm/reference_networking_gcp.html#outbound-internet-access["CVO용 방화벽 규칙 - GCP"]




== Ansible 자동화를 사용하여 온프레미스와 클라우드 간 DB 인스턴스 동기화 - 선택 사항

하이브리드 클라우드 데이터베이스 환경의 관리를 간소화하기 위해 NetApp Ansible 컨트롤러를 배포하여 온프레미스와 클라우드의 컴퓨팅 인스턴스를 동기화하는 등 일부 관리 작업을 자동화하는 것을 적극 권장하지만 필수는 아닙니다.  이는 클라우드에서 동기화되지 않은 컴퓨팅 인스턴스로 인해 커널 패키지 누락 및 기타 문제로 인해 클라우드에서 복구된 데이터베이스에 오류가 발생할 수 있으므로 특히 중요합니다.

Ansible 컨트롤러의 자동화 기능은 SnapMirror 인스턴스를 분할하여 프로덕션을 위한 DR 데이터 복사를 활성화하는 등 특정 작업을 위해 SnapCenter 강화하는 데에도 사용할 수 있습니다.

RedHat 또는 CentOS 머신에 대한 Ansible 제어 노드를 설정하려면 다음 지침을 따르세요.

. Ansible 제어 노드에 대한 요구 사항:
+
.. 다음 패키지가 설치된 RHEL/CentOS 머신:
+
... Python3
... Pip3
... Ansible(2.10.0 이상 버전)
... 깃






위의 요구 사항이 설치되지 않은 새 RHEL/CentOS 머신이 있는 경우 아래 단계에 따라 해당 머신을 Ansible 제어 노드로 설정하세요.

. RHEL-8/RHEL-7에 대한 Ansible 저장소 활성화
+
.. RHEL-8의 경우(아래 명령을 루트로 실행하세요)
+
[source, cli]
----
subscription-manager repos --enable ansible-2.9-for-rhel-8-x86_64-rpms
----
.. RHEL-7의 경우(아래 명령을 루트로 실행하세요)
+
[source, cli]
----
subscription-manager repos --enable rhel-7-server-ansible-2.9-rpms
----


. 아래 내용을 터미널에 붙여넣으세요
+
[source, cli]
----
sudo yum -y install python3 >> install.log
sudo yum -y install python3-pip >> install.log
python3 -W ignore -m pip --disable-pip-version-check install ansible >> install.log
sudo yum -y install git >> install.log
----


Ubuntu 또는 Debian 머신에 Ansible 제어 노드를 설정하려면 다음 지침을 따르세요.

. Ansible 제어 노드에 대한 요구 사항:
+
.. 다음 패키지가 설치된 Ubuntu/Debian 머신:
+
... Python3
... Pip3
... Ansible(2.10.0 이상 버전)
... 깃






위의 요구 사항이 설치되지 않은 새 Ubuntu/Debian 머신이 있는 경우 아래 단계에 따라 해당 머신을 Ansible 제어 노드로 설정하세요.

. 아래 내용을 터미널에 붙여넣으세요
+
[source, cli]
----
sudo apt-get -y install python3 >> outputlog.txt
sudo apt-get -y install python3-pip >> outputlog.txt
python3 -W ignore -m pip --disable-pip-version-check install ansible >> outputlog.txt
sudo apt-get -y install git >> outputlog.txt
----

