---
sidebar: sidebar 
permalink: dbops/hybrid-dbops-sc-gs-aws.html 
summary: 이 섹션에서는 AWS에 Cloud Manager와 Cloud Volumes ONTAP 배포하는 프로세스를 설명합니다. 
keywords: AWS, cloud volumes ontap, cloud manager, deploy 
---
= AWS 퍼블릭 클라우드 시작하기
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
이 섹션에서는 AWS에 Cloud Manager와 Cloud Volumes ONTAP 배포하는 프로세스를 설명합니다.



== AWS 퍼블릭 클라우드


NOTE: 이해하기 쉽게 하기 위해 AWS 배포를 기반으로 이 문서를 만들었습니다.  하지만 Azure와 GCP의 프로세스는 매우 유사합니다.



=== 1. 비행 전 점검

배포하기 전에 다음 단계의 배포를 위한 인프라가 제대로 구축되었는지 확인하세요.  여기에는 다음이 포함됩니다.

* AWS 계정
* 선택한 지역의 VPC
* 공용 인터넷에 접속 가능한 서브넷
* AWS 계정에 IAM 역할을 추가하는 권한
* AWS 사용자를 위한 비밀 키와 액세스 키




=== 2. AWS에 Cloud Manager 및 Cloud Volumes ONTAP 배포하는 단계


NOTE: Cloud Manager와 Cloud Volumes ONTAP 배포하는 방법은 여러 가지가 있습니다. 이 방법은 가장 간단하지만 가장 많은 권한이 필요합니다.  이 방법이 귀하의 AWS 환경에 적합하지 않은 경우 다음을 참조하십시오. https://docs.netapp.com/us-en/occm/task_creating_connectors_aws.html["NetApp 클라우드 문서"^] .



==== Cloud Manager 커넥터 배포

. 로 이동 https://www.netapp.com/bluexp/?utm_campaign=b2d-port-all-na-amer-digi-wepp-brand-amer-1745924643379&utm_source=google&utm_medium=paidsearch&utm_content=nativead&gad_source=1&gad_campaignid=21281798861&gclid=EAIaIQobChMIv_GU0KDJjQMVEXRHAR2A2hJzEAAYASAAEgKAZ_D_BwE["NetApp BlueXP"^] 로그인하거나 회원가입하세요.
+
image:cloud-central-login-page.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 로그인 후 Canvas로 이동하게 됩니다.
+
image:cloud-central-canvas-page.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. "작업 환경 추가"를 클릭하고 AWS에서 Cloud Volumes ONTAP 선택합니다.  여기에서는 단일 노드 시스템을 배포할지, 고가용성 쌍을 배포할지 선택할 수도 있습니다.  고가용성 쌍을 배포하기로 결정했습니다.
+
image:cloud-central-add-we-026.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 커넥터가 생성되지 않은 경우 커넥터를 생성하라는 팝업이 나타납니다.
+
image:cloud-central-add-conn-001.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. '시작하기'를 클릭한 다음 AWS를 선택합니다.
+
image:cloud-central-add-conn-003.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 비밀 키와 액세스 키를 입력하세요.  사용자에게 다음 사항에 명시된 올바른 권한이 있는지 확인하십시오. https://mysupport.netapp.com/site/info/cloud-manager-policies["NetApp 정책 페이지"^] .
+
image:cloud-central-add-conn-004.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 커넥터에 이름을 지정하고 설명된 대로 미리 정의된 역할을 사용하십시오. https://mysupport.netapp.com/site/info/cloud-manager-policies["NetApp 정책 페이지"^] 또는 Cloud Manager에게 역할을 만들어 달라고 요청하세요.
+
image:cloud-central-add-conn-005.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 커넥터를 배포하는 데 필요한 네트워킹 정보를 제공하세요.  다음을 통해 아웃바운드 인터넷 액세스가 활성화되었는지 확인하세요.
+
.. 커넥터에 공용 IP 주소 제공
.. 커넥터에 프록시를 제공하여 작업합니다.
.. 인터넷 게이트웨이를 통해 커넥터에 공용 인터넷으로의 경로 제공
+
image:cloud-central-add-conn-006.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]



. 보안 그룹을 제공하거나 새로운 보안 그룹을 만들어 SSH, HTTP, HTTPs를 통해 커넥터와의 통신을 제공합니다.  내 IP 주소에서만 커넥터에 액세스할 수 있도록 설정했습니다.
+
image:cloud-central-add-conn-007.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 요약 페이지에서 정보를 검토하고 '추가'를 클릭하여 커넥터를 배포합니다.
+
image:cloud-central-add-conn-008.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 이제 커넥터는 클라우드 형성 스택을 사용하여 배포됩니다.  Cloud Manager나 AWS를 통해 진행 상황을 모니터링할 수 있습니다.
+
image:cloud-central-add-conn-009.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 배포가 완료되면 성공 페이지가 나타납니다.
+
image:cloud-central-add-conn-010.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]





==== Cloud Volumes ONTAP 배포

. 요구 사항에 따라 AWS와 배포 유형을 선택하세요.
+
image:cloud-central-add-we-001.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 구독이 할당되지 않은 상태에서 PAYGO로 구매하려는 경우 자격 증명 편집을 선택하세요.
+
image:cloud-central-add-we-002.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 구독 추가를 선택하세요.
+
image:cloud-central-add-we-003.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 가입하고자 하는 계약 유형을 선택하세요.  저는 Pay-as-you-go를 선택했습니다.
+
image:cloud-central-add-we-004.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. AWS로 리디렉션됩니다. 구독 계속을 선택하세요.
+
image:cloud-central-add-we-005.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 구독하시면 NetApp Cloud Central로 돌아갑니다.  이미 구독을 신청하셨고 리디렉션되지 않으시면 "여기를 클릭하세요" 링크를 선택하세요.
+
image:cloud-central-add-we-006.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. Cloud Central로 리디렉션되어 구독 이름을 지정하고 이를 Cloud Central 계정에 할당해야 합니다.
+
image:cloud-central-add-we-007.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 성공하면 체크 표시 페이지가 나타납니다.  클라우드 관리자 탭으로 돌아갑니다.
+
image:cloud-central-add-we-008.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 이제 구독이 Cloud Central에 나타납니다.  계속하려면 '적용'을 클릭하세요.
+
image:cloud-central-add-we-009.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 다음과 같은 작업 환경 세부 정보를 입력하세요.
+
.. 클러스터 이름
.. 클러스터 비밀번호
.. AWS 태그(선택 사항)
+
image:cloud-central-add-we-010.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]



. 어떤 추가 서비스를 배포하고 싶은지 선택하세요.  이러한 서비스에 대해 자세히 알아보려면 다음을 방문하세요. https://bluexp.netapp.com/["BlueXP: 최신 데이터 자산 운영을 간편하게"^] .
+
image:cloud-central-add-we-011.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 여러 가용성 영역(각각 다른 AZ에 있는 3개의 서브넷 필요)에 배포할지, 아니면 단일 가용성 영역에 배포할지 선택합니다.  저는 여러 개의 AZ를 선택했습니다.
+
image:cloud-central-add-we-012.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 클러스터를 배포할 지역, VPC 및 보안 그룹을 선택합니다.  이 섹션에서는 노드(및 중재자)당 가용성 영역과 이들이 차지하는 서브넷도 지정합니다.
+
image:cloud-central-add-we-013.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 노드와 중재자에 대한 연결 방법을 선택합니다.
+
image:cloud-central-add-we-014.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]




TIP: 중재자는 AWS API와 통신해야 합니다.  중재자 EC2 인스턴스가 배포된 후 API에 접근할 수 있는 한 공용 IP 주소는 필요하지 않습니다.

. 유동 IP 주소는 클러스터 관리 및 데이터 제공 IP를 포함하여 Cloud Volumes ONTAP 에서 사용하는 다양한 IP 주소에 액세스할 수 있도록 하는 데 사용됩니다.  이러한 주소는 네트워크 내에서 아직 라우팅할 수 없는 주소여야 하며 AWS 환경의 라우팅 테이블에 추가되어야 합니다.  이러한 기능은 장애 조치 중에 HA 쌍에 대해 일관된 IP 주소를 활성화하는 데 필요합니다.  유동 IP 주소에 대한 자세한 내용은 다음에서 확인할 수 있습니다. https://docs.netapp.com/us-en/occm/reference_networking_aws.html#requirements-for-ha-pairs-in-multiple-azs["NetApp 클라우드 문서"^] .
+
image:cloud-central-add-we-015.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 어떤 경로 테이블에 플로팅 IP 주소를 추가할지 선택합니다.  이러한 경로 테이블은 클라이언트가 Cloud Volumes ONTAP 과 통신하는 데 사용됩니다.
+
image:cloud-central-add-we-016.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. ONTAP 루트, 부팅 및 데이터 디스크를 암호화하기 위해 AWS 관리 암호화 또는 AWS KMS를 사용할지 여부를 선택합니다.
+
image:cloud-central-add-we-017.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 라이선스 모델을 선택하세요.  어떤 것을 선택해야 할지 모르겠다면 NetApp 담당자에게 문의하세요.
+
image:cloud-central-add-we-018.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 귀하의 사용 사례에 가장 적합한 구성을 선택하세요.  이는 필수 조건 페이지에서 다룬 크기 고려 사항과 관련이 있습니다.
+
image:cloud-central-add-we-019.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 선택적으로 볼륨을 생성합니다.  이는 다음 단계에서 볼륨을 생성하는 SnapMirror 사용하므로 필수는 아닙니다.
+
image:cloud-central-add-we-020.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 선택 사항을 검토하고 상자를 체크하여 Cloud Manager가 리소스를 AWS 환경에 배포한다는 것을 이해했는지 확인하세요.  준비가 되면 '이동'을 클릭하세요.
+
image:cloud-central-add-we-021.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 이제 Cloud Volumes ONTAP 이 배포 프로세스를 시작합니다.  Cloud Manager는 AWS API와 클라우드 형성 스택을 사용하여 Cloud Volumes ONTAP 배포합니다.  그런 다음 귀하의 사양에 맞게 시스템을 구성하여 즉시 사용할 수 있는 시스템을 제공합니다.  이 과정의 타이밍은 선택에 따라 달라집니다.
+
image:cloud-central-add-we-022.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 타임라인으로 이동하여 진행 상황을 모니터링할 수 있습니다.
+
image:cloud-central-add-we-023.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 타임라인은 Cloud Manager에서 수행된 모든 작업에 대한 감사 역할을 합니다.  AWS와 ONTAP 클러스터를 설정하는 동안 Cloud Manager에서 이루어진 모든 API 호출을 볼 수 있습니다.  이는 귀하가 직면한 문제를 해결하는 데에도 효과적으로 사용될 수 있습니다.
+
image:cloud-central-add-we-024.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 배포가 완료되면 CVO 클러스터가 Canvas에 나타나고 현재 용량이 표시됩니다.  현재 상태의 ONTAP 클러스터는 즉시 사용 가능한 실제 환경을 제공할 수 있도록 완벽하게 구성되어 있습니다.
+
image:cloud-central-add-we-025.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]





==== 온프레미스에서 클라우드로 SnapMirror 구성

이제 소스 ONTAP 시스템과 대상 ONTAP 시스템이 배포되었으므로 데이터베이스 데이터가 포함된 볼륨을 클라우드로 복제할 수 있습니다.

SnapMirror 에 대한 호환 ONTAP 버전에 대한 가이드는 다음을 참조하세요. https://docs.netapp.com/ontap-9/index.jsp?topic=%2Fcom.netapp.doc.pow-dap%2FGUID-0810D764-4CEA-4683-8280-032433B1886B.html["SnapMirror 호환성 매트릭스"^] .

. 소스 ONTAP 시스템(온프레미스)을 클릭하고 대상 위치로 끌어서 놓거나 복제 > 사용을 선택하거나 복제 > 메뉴 > 복제를 선택합니다.
+
image:cloud-central-replication-001.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+
사용을 선택하세요.

+
image:cloud-central-replication-002.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+
또는 옵션.

+
image:cloud-central-replication-003.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+
뒤로 젖히다.

+
image:cloud-central-replication-004.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 드래그 앤 드롭을 하지 않은 경우 복제할 대상 클러스터를 선택하세요.
+
image:cloud-central-replication-005.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 복제할 볼륨을 선택하세요.  우리는 데이터와 모든 로그 볼륨을 복제했습니다.
+
image:cloud-central-replication-006.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 대상 디스크 유형과 계층화 정책을 선택하세요.  재해 복구를 위해서는 디스크 유형으로 SSD를 사용하고 데이터 계층화를 유지하는 것이 좋습니다.  데이터 계층화는 미러링된 데이터를 저비용 개체 스토리지로 계층화하여 로컬 디스크 비용을 절감합니다.  관계를 끊거나 볼륨을 복제하면 데이터는 빠른 로컬 저장소를 사용합니다.
+
image:cloud-central-replication-007.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 대상 볼륨 이름을 선택하십시오: 우리는 선택했습니다 `[source_volume_name]_dr` .
+
image:cloud-central-replication-008.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 복제에 대한 최대 전송 속도를 선택합니다.  VPN과 같이 클라우드에 대한 대역폭 연결이 낮은 경우 대역폭을 절약할 수 있습니다.
+
image:cloud-central-replication-009.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 복제 정책을 정의합니다.  우리는 가장 최근의 데이터 세트를 가져와 대상 볼륨에 복제하는 미러를 선택했습니다.  귀하의 요구 사항에 따라 다른 정책을 선택할 수도 있습니다.
+
image:cloud-central-replication-010.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 복제를 트리거할 일정을 선택합니다.  NetApp 데이터 볼륨에 대해 "일일" 일정을 설정하고 로그 볼륨에 대해 "시간별" 일정을 설정하는 것을 권장하지만, 이는 요구 사항에 따라 변경될 수 있습니다.
+
image:cloud-central-replication-011.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 입력한 정보를 검토하고, '이동'을 클릭하여 클러스터 피어와 SVM 피어를 트리거합니다(두 클러스터 간에 처음으로 복제하는 경우). 그런 다음 SnapMirror 관계를 구현하고 초기화합니다.
+
image:cloud-central-replication-012.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 데이터 볼륨과 로그 볼륨에 대해서도 이 프로세스를 계속합니다.
. 모든 관계를 확인하려면 Cloud Manager 내의 복제 탭으로 이동하세요.  여기에서 관계를 관리하고 상태를 확인할 수 있습니다.
+
image:cloud-central-replication-013.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 모든 볼륨이 복제되면 안정된 상태가 되어 재해 복구 및 개발/테스트 워크플로로 넘어갈 준비가 됩니다.




=== 3. 데이터베이스 워크로드를 위한 EC2 컴퓨팅 인스턴스 배포

AWS는 다양한 작업 부하에 맞춰 EC2 컴퓨팅 인스턴스를 미리 구성했습니다.  인스턴스 유형을 선택하면 CPU 코어 수, 메모리 용량, 스토리지 유형 및 용량, 네트워크 성능이 결정됩니다.  OS 파티션을 제외한 사용 사례의 경우, 데이터베이스 워크로드를 실행하기 위한 주 스토리지는 CVO 또는 FSx ONTAP 스토리지 엔진에서 할당됩니다.  따라서 고려해야 할 주요 요소는 CPU 코어, 메모리, 네트워크 성능 수준의 선택입니다.  일반적인 AWS EC2 인스턴스 유형은 다음에서 확인할 수 있습니다. https://us-east-2.console.aws.amazon.com/ec2/v2/home?region=us-east-2#InstanceTypes:["EC2 인스턴스 유형"] .



==== 컴퓨팅 인스턴스 크기 조정

. 필요한 작업 부하에 따라 올바른 인스턴스 유형을 선택하세요.  고려해야 할 요소에는 지원해야 할 비즈니스 거래 수, 동시 사용자 수, 데이터 세트 크기 등이 있습니다.
. EC2 인스턴스 배포는 EC2 대시보드를 통해 시작할 수 있습니다.  정확한 배포 절차는 이 솔루션의 범위를 벗어납니다.  보다 https://aws.amazon.com/pm/ec2/?trk=ps_a134p000004f2ZGAAY&trkCampaign=acq_paid_search_brand&sc_channel=PS&sc_campaign=acquisition_US&sc_publisher=Google&sc_category=Cloud%20Computing&sc_country=US&sc_geo=NAMER&sc_outcome=acq&sc_detail=%2Bec2%20%2Bcloud&sc_content=EC2%20Cloud%20Compute_bmm&sc_matchtype=b&sc_segment=536455698896&sc_medium=ACQ-P|PS-GO|Brand|Desktop|SU|Cloud%20Computing|EC2|US|EN|Text&s_kwcid=AL!4422!3!536455698896!b!!g!!%2Bec2%20%2Bcloud&ef_id=EAIaIQobChMIua378M-p8wIVToFQBh0wfQhsEAMYASAAEgKTzvD_BwE:G:s&s_kwcid=AL!4422!3!536455698896!b!!g!!%2Bec2%20%2Bcloud["아마존 EC2"] 자세한 내용은.




==== Oracle 워크로드를 위한 Linux 인스턴스 구성

이 섹션에는 EC2 Linux 인스턴스가 배포된 후의 추가 구성 단계가 포함되어 있습니다.

. SnapCenter 관리 도메인 내에서 이름 확인을 위해 DNS 서버에 Oracle 대기 인스턴스를 추가합니다.
. 비밀번호 없이 sudo 권한을 사용하여 SnapCenter OS 자격 증명으로 Linux 관리 사용자 ID를 추가합니다.  EC2 인스턴스에서 SSH 암호 인증을 사용하여 ID를 활성화합니다.  (기본적으로 EC2 인스턴스에서는 SSH 암호 인증 및 암호 없는 sudo가 꺼져 있습니다.)
. OS 패치, Oracle 버전 및 패치 등을 온프레미스 Oracle 설치와 일치하도록 Oracle 설치를 구성합니다.
. NetApp Ansible DB 자동화 역할을 활용하여 데이터베이스 개발/테스트 및 재해 복구 사용 사례에 맞게 EC2 인스턴스를 구성할 수 있습니다.  자동화 코드는 NetApp 공개 GitHub 사이트에서 다운로드할 수 있습니다. https://github.com/NetApp-Automation/na_oracle19c_deploy["Oracle 19c 자동 배포"^] .  목표는 온프레미스 OS 및 데이터베이스 구성과 일치하도록 EC2 인스턴스에 데이터베이스 소프트웨어 스택을 설치하고 구성하는 것입니다.




==== SQL Server 워크로드를 위한 Windows 인스턴스 구성

이 섹션에서는 EC2 Windows 인스턴스가 처음 배포된 후의 추가 구성 단계를 나열합니다.

. RDP를 통해 인스턴스에 로그인하기 위해 Windows 관리자 비밀번호를 검색합니다.
. Windows 방화벽을 비활성화하고, 호스트를 Windows SnapCenter 도메인에 가입시키고, 이름 확인을 위해 인스턴스를 DNS 서버에 추가합니다.
. SQL Server 로그 파일을 저장하기 위해 SnapCenter 로그 볼륨을 프로비저닝합니다.
. Windows 호스트에서 iSCSI를 구성하여 볼륨을 마운트하고 디스크 드라이브를 포맷합니다.
. 다시 말해, 이전 작업 중 대부분은 SQL Server용 NetApp 자동화 솔루션을 사용하여 자동화할 수 있습니다.  새로 게시된 역할과 솔루션은 NetApp 자동화 공개 GitHub 사이트에서 확인하세요. https://github.com/NetApp-Automation["NetApp 자동화"^] .

