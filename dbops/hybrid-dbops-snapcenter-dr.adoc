---
sidebar: sidebar 
permalink: dbops/hybrid-dbops-snapcenter-dr.html 
summary: SnapCenter DR 워크플로를 사용한 하이브리드 클라우드 데이터베이스 솔루션 
keywords: 'netapp, solutions, database, SnapCenter, DR, "business continuity", "disaster recovery"' 
---
= 재해 복구 워크플로
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
기업들은 퍼블릭 클라우드를 재해 복구를 위한 실행 가능한 리소스이자 목적지로 받아들였습니다.  SnapCenter 이 과정을 가능한 한 원활하게 만들어줍니다.  이 재해 복구 워크플로는 복제 워크플로와 매우 유사하지만, 데이터베이스 복구는 클라우드에 복제된 마지막 사용 가능한 로그를 통해 실행되어 가능한 모든 비즈니스 거래를 복구합니다.  그러나 재해 복구에만 적용되는 사전 구성 및 사후 구성 단계가 추가로 있습니다.



== DR을 위해 온프레미스 Oracle 프로덕션 DB를 클라우드로 복제합니다.

. 복제 복구가 마지막으로 사용 가능한 로그를 통해 실행되는지 확인하기 위해 작은 테스트 테이블을 만들고 행을 삽입했습니다.  전체 복구가 완료된 후 테스트 데이터는 마지막으로 사용 가능한 로그로 복구됩니다.
+
image:snapctr-ora-dr-001.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. Oracle용 데이터베이스 관리 사용자 ID로 SnapCenter 에 로그인합니다.  SnapCenter 에서 보호되는 Oracle 데이터베이스를 보여주는 리소스 탭으로 이동합니다.
+
image:snapctr-ora-dr-002.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. Oracle 로그 리소스 그룹을 선택하고 지금 백업을 클릭하여 Oracle 로그 백업을 수동으로 실행하고 최신 트랜잭션을 클라우드의 대상에 플러시합니다.  실제 DR 시나리오에서 복구 가능한 마지막 트랜잭션은 클라우드에 대한 데이터베이스 로그 볼륨 복제 빈도에 따라 달라지며, 이는 다시 회사의 RTO 또는 RPO 정책에 따라 달라집니다.
+
image:snapctr-ora-dr-003.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+
image:snapctr-ora-dr-004.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+

NOTE: 재해 복구 시나리오에서 비동기 SnapMirror 데이터베이스 로그 백업 간격 동안 클라우드 대상에 도달하지 못한 데이터를 손실합니다.  데이터 손실을 최소화하기 위해 더 자주 로그 백업을 예약할 수 있습니다.  그러나 기술적으로 달성 가능한 로그 백업 빈도에는 제한이 있습니다.

. 2차 미러 백업에서 마지막 로그 백업을 선택하고 로그 백업을 마운트합니다.
+
image:snapctr-ora-dr-005.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+
image:snapctr-ora-dr-006.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 마지막 전체 데이터베이스 백업을 선택하고 복제를 클릭하여 복제 워크플로를 시작합니다.
+
image:snapctr-ora-dr-007.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 호스트에서 고유한 복제 DB ID를 선택합니다.
+
image:snapctr-ora-dr-008.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 로그 볼륨을 프로비저닝하고 Oracle 플래시 복구 영역과 온라인 로그에 대한 대상 DR 서버에 마운트합니다.
+
image:snapctr-ora-dr-009.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+
image:snapctr-ora-dr-010.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+

NOTE: Oracle 복제 절차는 로그 볼륨을 생성하지 않으므로 복제하기 전에 DR 서버에 프로비저닝해야 합니다.

. 데이터 파일, 제어 파일, 리두 로그를 저장할 대상 복제 호스트와 위치를 선택합니다.
+
image:snapctr-ora-dr-011.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 복제본의 자격 증명을 선택합니다.  대상 서버의 Oracle 홈 구성 세부 정보를 입력합니다.
+
image:snapctr-ora-dr-012.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 복제하기 전에 실행할 스크립트를 지정합니다.  필요한 경우 데이터베이스 매개변수를 조정할 수 있습니다.
+
image:snapctr-ora-dr-013.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 마지막으로 2차 클라우드 위치에 복제된 트랜잭션을 회수하기 위해 사용 가능한 모든 보관 로그를 통해 복구를 실행하도록 복구 옵션으로 '취소까지'를 선택합니다.
+
image:snapctr-ora-dr-014.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 필요한 경우 이메일 알림을 위해 SMTP 서버를 구성합니다.
+
image:snapctr-ora-dr-015.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. DR 클론 요약.
+
image:snapctr-ora-dr-016.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 복제된 DB는 복제가 완료되는 즉시 SnapCenter 에 등록되며 백업 보호에 사용할 수 있습니다.
+
image:snapctr-ora-dr-016-a.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]





== Oracle에 대한 DR 복제본 검증 및 구성 후

. 클라우드의 DR 위치에서 플러시, 복제 및 복구된 마지막 테스트 트랜잭션을 검증합니다.
+
image:snapctr-ora-dr-017.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 플래시 복구 영역을 구성합니다.
+
image:snapctr-ora-dr-018.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 사용자 액세스를 위해 Oracle 리스너를 구성합니다.
. 복제된 볼륨을 복제된 소스 볼륨에서 분할합니다.
. 클라우드에서 온프레미스로 역방향 복제를 수행하고 오류가 발생한 온프레미스 데이터베이스 서버를 다시 구축합니다.



NOTE: 복제 분할은 일반 작업보다 훨씬 높은 임시 저장 공간 사용량을 초래할 수 있습니다.  하지만 온프레미스 DB 서버를 재구축한 후에는 추가 공간을 확보할 수 있습니다.



== DR을 위해 온프레미스 SQL 프로덕션 DB를 클라우드로 복제합니다.

. 마찬가지로, SQL 복제 복구가 마지막으로 사용 가능한 로그를 통해 실행되었는지 확인하기 위해 작은 테스트 테이블을 만들고 행을 삽입했습니다.  테스트 데이터는 마지막으로 사용 가능한 로그로 완전히 복구된 후 복구됩니다.
+
image:snapctr-sql-dr-001.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. SQL Server용 데이터베이스 관리 사용자 ID로 SnapCenter 에 로그인합니다.  SQL Server 보호 리소스 그룹이 표시되는 리소스 탭으로 이동합니다.
+
image:snapctr-sql-dr-002.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 퍼블릭 클라우드의 보조 저장소에 복제할 마지막 트랜잭션을 플러시하기 위해 수동으로 로그 백업을 실행합니다.
+
image:snapctr-sql-dr-003.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 복제본의 마지막 전체 SQL Server 백업을 선택합니다.
+
image:snapctr-sql-dr-004.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 복제 서버, 복제 인스턴스, 복제 이름, 마운트 옵션 등의 복제 설정을 지정합니다.  복제가 수행되는 보조 저장 위치는 자동으로 채워집니다.
+
image:snapctr-sql-dr-005.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 적용할 모든 로그 백업을 선택합니다.
+
image:snapctr-sql-dr-006.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 복제 전이나 후에 실행할 선택적 스크립트를 지정합니다.
+
image:snapctr-sql-dr-007.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 이메일 알림을 원하시면 SMTP 서버를 지정하세요.
+
image:snapctr-sql-dr-008.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. DR 클론 요약.  복제된 데이터베이스는 SnapCenter 에 즉시 등록되어 백업 보호에 사용할 수 있습니다.
+
image:snapctr-sql-dr-009.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+
image:snapctr-sql-dr-010.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]





== SQL에 대한 DR 복제 검증 및 구성 후

. 복제 작업 상태를 모니터링합니다.
+
image:snapctr-sql-dr-011.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 마지막 트랜잭션이 모든 로그 파일 복제 및 복구를 통해 복제되고 복구되었는지 확인합니다.
+
image:snapctr-sql-dr-012.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. SQL Server 로그 백업을 위해 DR 서버에 새로운 SnapCenter 로그 디렉토리를 구성합니다.
. 복제된 볼륨을 복제된 소스 볼륨에서 분할합니다.
. 클라우드에서 온프레미스로 역방향 복제를 수행하고 오류가 발생한 온프레미스 데이터베이스 서버를 다시 구축합니다.




== 도움을 받으려면 어디로 가야 하나요?

이 솔루션과 사용 사례에 대한 도움이 필요하면 가입하세요.link:https://netapppub.slack.com/archives/C021R4WC0LC["NetApp 솔루션 자동화 커뮤니티 지원 Slack 채널"] 질문이나 문의사항이 있으면 솔루션 자동화 채널을 찾아 게시하세요.
