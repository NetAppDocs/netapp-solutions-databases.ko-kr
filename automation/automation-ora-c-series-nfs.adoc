---
sidebar: sidebar 
permalink: automation/automation-ora-c-series-nfs.html 
keywords: Database, Oracle, Azure, ANF, Ansible, Automation 
summary: 이 솔루션은 NFS 프로토콜을 사용하여 NetApp AFF C-시리즈에서 기본 데이터베이스 스토리지로 자동화된 Oracle 배포에 대한 개요와 세부 정보를 제공합니다.  Oracle 데이터베이스는 dNFS가 활성화된 컨테이너 데이터베이스로 배포됩니다. 
---
= TR-4992: NFS를 사용한 NetApp C-시리즈에서의 간소화되고 자동화된 Oracle 배포
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


Allen Cao, Niyaz Mohamed, NetApp

[role="lead"]
이 솔루션은 NFS 프로토콜을 사용하여 NetApp AFF C-시리즈에서 기본 데이터베이스 스토리지로 자동화된 Oracle 배포에 대한 개요와 세부 정보를 제공합니다.  Oracle 데이터베이스는 dNFS가 활성화된 컨테이너 데이터베이스로 배포됩니다.



== 목적

NetApp AFF C-시리즈는 통합 스토리지에서 올플래시를 보다 쉽고 저렴하게 사용할 수 있는 대용량 플래시 스토리지입니다.  이는 많은 1계층 또는 2계층 Oracle 데이터베이스 워크로드에 대한 성능 면에서 충분합니다.  NetApp ONTAP 데이터 관리 소프트웨어로 구동되는 AFF C-시리즈 시스템은 업계 최고의 효율성, 뛰어난 유연성, 동급 최고의 데이터 서비스 및 클라우드 통합을 제공하여 IT 인프라를 확장하고, 데이터 관리를 간소화하고, 스토리지 비용과 전력 소비를 줄이는 데 도움이 됩니다.

이 문서에서는 Ansible 자동화를 사용하여 NFS 마운트를 통해 NetApp C-시리즈에 Oracle 데이터베이스를 간편하게 배포하는 방법을 보여줍니다.  Oracle 데이터베이스는 Oracle dNFS 프로토콜을 활성화하여 컨테이너 데이터베이스(CDB) 및 플러그형 데이터베이스(PDB) 구성으로 배포되어 성능을 향상시킵니다.  또한 이 솔루션은 C-시리즈 스토리지 컨트롤러에서 NFS 프로토콜을 사용하여 스토리지 네트워킹과 스토리지 가상 머신(SVM)을 설정하는 모범 사례를 제공합니다.  이 솔루션에는 NetApp SnapCenter UI 도구를 사용한 빠른 Oracle 데이터베이스 백업, 복원 및 복제에 대한 정보도 포함되어 있습니다.

이 솔루션은 다음과 같은 사용 사례를 해결합니다.

* NetApp C-Series 스토리지 컨트롤러에 Oracle 컨테이너 데이터베이스를 자동으로 배포합니다.
* SnapCenter UI 도구를 사용하여 C-Series에서 Oracle 데이터베이스를 보호하고 복제합니다.




== 대상

이 솔루션은 다음과 같은 사람들을 위해 만들어졌습니다.

* NetApp C-Series에 Oracle을 배포하려는 DBA입니다.
* NetApp C-Series에서 Oracle 워크로드를 테스트하려는 데이터베이스 솔루션 아키텍트입니다.
* NetApp C-Series에 Oracle 데이터베이스를 배포하고 관리하려는 스토리지 관리자입니다.
* NetApp C-Series에 Oracle 데이터베이스를 구축하려는 애플리케이션 소유자입니다.




== 솔루션 테스트 및 검증 환경

이 솔루션의 테스트와 검증은 최종 배포 환경과 일치하지 않을 수 있는 실험실 환경에서 수행되었습니다.  섹션을 참조하세요<<배포 고려사항의 핵심 요소>> 자세한 내용은.



=== 아키텍처

image:automation-ora-c-series-nfs-architecture.png["이 이미지는 iSCSI 및 ASM을 사용한 AWS 퍼블릭 클라우드의 Oracle 배포 구성에 대한 자세한 그림을 제공합니다."]



=== 하드웨어 및 소프트웨어 구성 요소

[cols="33%, 33%, 33%"]
|===


3+| *하드웨어* 


| NetApp C-시리즈 C400 | ONTAP 버전 9.13.1P3 | 2개의 디스크 선반/278TiB 용량의 24개 디스크 


| DB 서버용 VM | 4개의 vCPU, 16GiB RAM | 동시 배포를 위한 두 개의 Linux VM 인스턴스 


| SnapCenter 용 VM | 4개의 vCPU, 16GiB RAM | 하나의 Windows VM 인스턴스 


3+| *소프트웨어* 


| 레드햇 리눅스 | RHEL Linux 8.6(LVM) - x64 Gen2 | 테스트를 위해 RedHat 구독을 배포했습니다. 


| 윈도우 서버 | 2022 데이터센터 x64 Gen2 | SnapCenter 서버 호스팅 


| 오라클 데이터베이스 | 버전 19.18 | RU 패치 p34765931_190000_Linux-x86-64.zip을 적용했습니다. 


| 오라클 OPatch | 버전 12.2.0.1.36 | 최신 패치 p6880880_190000_Linux-x86-64.zip 


| SnapCenter 서버 | 버전 5.0 | 작업 그룹 배포 


| JDK를 엽니다 | 버전 java-11-openjdk | DB VM의 SnapCenter 플러그인 요구 사항 


| NFS | 버전 3.0 | Oracle dNFS 활성화됨 


| 앤서블 | 코어 2.16.2 | 파이썬 3.6.8 
|===


=== 랩 환경에서의 Oracle 데이터베이스 구성

[cols="33%, 33%, 33%"]
|===


3+|  


| *섬기는 사람* | *데이터 베이스* | *DB 스토리지* 


| ora_01 | NTAP1(NTAP1_PDB1, NTAP1_PDB2, NTAP1_PDB3) | /u01, /u02, /u03 C400 볼륨에 NFS 마운트 


| ora_02 | NTAP2(NTAP2_PDB1, NTAP2_PDB2, NTAP2_PDB3) | /u01, /u02, /u03 C400 볼륨에 NFS 마운트 
|===


=== 배포 고려사항의 핵심 요소

* *오라클 데이터베이스 저장 레이아웃.*  이 자동화된 Oracle 배포에서는 기본적으로 Oracle 바이너리, 데이터 및 로그를 호스팅하기 위해 각 데이터베이스에 대해 3개의 데이터베이스 볼륨을 프로비저닝합니다.  볼륨은 NFS를 통해 Oracle DB 서버에 /u01 - 바이너리, /u02 - 데이터, /u03 - 로그로 마운트됩니다.  이중 제어 파일은 중복성을 위해 /u02 및 /u03 마운트 지점에 구성됩니다.
* *다중 DB 서버 배포.*  자동화 솔루션은 단일 Ansible 플레이북 실행으로 Oracle 컨테이너 데이터베이스를 여러 DB 서버에 배포할 수 있습니다.  DB 서버 수에 관계없이 플레이북 실행은 동일하게 유지됩니다.  다른 데이터베이스 인스턴스 ID(Oracle SID)로 배포를 반복하여 여러 컨테이너 데이터베이스를 단일 VM 인스턴스에 배포할 수 있습니다.  하지만 배포된 데이터베이스를 지원할 만큼 호스트에 충분한 메모리가 있는지 확인하세요.
* *dNFS 구성.*  dNFS(Oracle 11g부터 사용 가능)를 사용하면 DB VM에서 실행되는 Oracle 데이터베이스가 기본 NFS 클라이언트보다 훨씬 더 많은 I/O를 처리할 수 있습니다.  자동화된 Oracle 배포는 기본적으로 NFSv3에서 dNFS를 구성합니다.
* *C400 컨트롤러 쌍의 부하 분산.*  작업 부하를 균형 있게 분산하기 위해 C400 컨트롤러 노드에 Oracle 데이터베이스 볼륨을 균등하게 배치합니다.  컨트롤러 1에는 DB1, 컨트롤러 2에는 DB2 등이 있습니다.  DB 볼륨을 로컬 life 주소에 마운트합니다.
* *데이터베이스 백업.*  NetApp 사용자 친화적인 UI 인터페이스를 통해 데이터베이스 백업, 복원 및 복제를 위한 SnapCenter software 제품군을 제공합니다.  NetApp 빠른(1분 이내) 스냅샷 백업, 빠른(분) 데이터베이스 복원 및 데이터베이스 복제를 달성하기 위해 이러한 관리 도구를 구현할 것을 권장합니다.




== 솔루션 구축

다음 섹션에서는 Oracle 19c를 자동으로 배포하기 위한 단계별 절차와 배포 후 Oracle 데이터베이스 보호 및 복제에 대한 정보를 제공합니다.



=== 배포를 위한 전제 조건

[%collapsible%open]
====
배포에는 다음과 같은 전제 조건이 필요합니다.

. NetApp C-시리즈 스토리지 컨트롤러 쌍이 랙에 장착되고 스택되었으며, 최신 버전의 ONTAP 운영 체제가 설치 및 구성되었습니다.  필요에 따라 이 설정 가이드를 참조하세요. https://docs.netapp.com/us-en/ontap-systems/c400/install-detailed-guide.html#step-1-prepare-for-installation["상세 가이드 - AFF C400"^]
. 두 개의 Linux VM을 Oracle DB 서버로 프로비저닝합니다.  환경 설정에 대한 자세한 내용은 이전 섹션의 아키텍처 다이어그램을 참조하세요.
. 최신 버전의 NetApp SnapCenter UI 도구를 실행하기 위해 Windows 서버를 프로비저닝합니다.  자세한 내용은 다음 링크를 참조하세요.link:https://docs.netapp.com/us-en/snapcenter/install/task_install_the_snapcenter_server_using_the_install_wizard.html["SnapCenter 서버 설치"^]
. 최신 버전의 Ansible과 Git이 설치된 Ansible 컨트롤러 노드로 Linux VM을 프로비저닝합니다.  자세한 내용은 다음 링크를 참조하세요.link:https://docs.netapp.com/us-en/netapp-solutions-dataops/automation/getting-started.html["NetApp 솔루션 자동화 시작하기^"^] 섹션에서 -
`Setup the Ansible Control Node for CLI deployments on RHEL / CentOS` 또는
`Setup the Ansible Control Node for CLI deployments on Ubuntu / Debian` .
+
Ansible 컨트롤러와 데이터베이스 VM 간에 ssh 공개/비공개 키 인증을 활성화합니다.

. Ansible 컨트롤러 관리자 사용자 홈 디렉토리에서 NFS용 NetApp Oracle 배포 자동화 툴킷의 사본을 복제합니다.
+
[source, cli]
----
git clone https://bitbucket.ngage.netapp.com/scm/ns-bb/na_oracle_deploy_nfs.git
----
. DB VM /tmp/archive 디렉토리에 777 권한이 있는 Oracle 19c 설치 파일을 다음 단계에 따라 실행합니다.
+
....
installer_archives:
  - "LINUX.X64_193000_db_home.zip"
  - "p34765931_190000_Linux-x86-64.zip"
  - "p6880880_190000_Linux-x86-64.zip"
....


====


=== Oracle용 C-Series에서 네트워킹 및 SVM 구성

[%collapsible%open]
====
이 배포 가이드 섹션에서는 ONTAP System Manager UI를 사용하여 NFS 프로토콜을 사용하는 Oracle 워크로드를 위한 C-Series 컨트롤러에 네트워킹 및 스토리지 가상 머신(SVM)을 설정하는 모범 사례를 보여줍니다.

. ONTAP 시스템 관리자에 로그인하여 ONTAP 클러스터를 처음 설치한 후 브로드캐스트 도메인이 구성되고 각 도메인에 이더넷 포트가 올바르게 할당되었는지 확인합니다.  일반적으로 클러스터에 대한 브로드캐스트 도메인, 관리를 위한 브로드캐스트 도메인, 데이터와 같은 작업 부하에 대한 브로드캐스트 도메인이 있어야 합니다.
+
image:automation-ora-c-series-nfs-net-001.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."]

. 네트워크 - 이더넷 포트에서 다음을 클릭합니다. `Link Aggregate Group` 집계 그룹 포트의 멤버 포트 간에 부하 분산 및 장애 조치를 제공하는 LACP 링크 집계 그룹 포트 a0a를 생성합니다.  C400 컨트롤러에는 e0e, e0f, e0g, e0h라는 4개의 데이터 포트가 있습니다.
+
image:automation-ora-c-series-nfs-net-002.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."]

. 그룹에서 이더넷 포트를 선택하세요. `LACP` 모드의 경우 `Port` 하중 분산을 위해.
+
image:automation-ora-c-series-nfs-net-003.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."]

. LACP 포트 a0a가 생성되고 브로드캐스트 도메인이 검증되었습니다. `Data` 현재 LACP 포트에서 작동 중입니다.
+
image:automation-ora-c-series-nfs-net-004.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."] image:automation-ora-c-series-nfs-net-005.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."]

. 에서 `Ethernet Ports` , 클릭 `VLAN` NFS 프로토콜에서 Oracle 워크로드를 위해 각 컨트롤러 노드에 VLAN을 추가합니다.
+
image:automation-ora-c-series-nfs-net-006.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."] image:automation-ora-c-series-nfs-net-007.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."] image:automation-ora-c-series-nfs-net-008.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."]

. ssh를 통해 클러스터 관리 IP에서 C-시리즈 컨트롤러에 로그인하여 네트워크 장애 조치 그룹이 올바르게 구성되었는지 확인합니다.  ONTAP 장애 조치 그룹을 자동으로 생성하고 관리합니다.
+
....

HCG-NetApp-C400-E9U9::> net int failover-groups show
  (network interface failover-groups show)
                                  Failover
Vserver          Group            Targets
---------------- ---------------- --------------------------------------------
Cluster
                 Cluster
                                  HCG-NetApp-C400-E9U9a:e0c,
                                  HCG-NetApp-C400-E9U9a:e0d,
                                  HCG-NetApp-C400-E9U9b:e0c,
                                  HCG-NetApp-C400-E9U9b:e0d
HCG-NetApp-C400-E9U9
                 Data
                                  HCG-NetApp-C400-E9U9a:a0a,
                                  HCG-NetApp-C400-E9U9a:a0a-3277,
                                  HCG-NetApp-C400-E9U9b:a0a,
                                  HCG-NetApp-C400-E9U9b:a0a-3277
                 Mgmt
                                  HCG-NetApp-C400-E9U9a:e0M,
                                  HCG-NetApp-C400-E9U9b:e0M
3 entries were displayed.

....
. 에서 `STORAGE - Storage VMs` , +추가를 클릭하여 Oracle용 SVM을 만듭니다.
+
image:automation-ora-c-series-nfs-svm-001.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."]

. Oracle SVM의 이름을 지정하고 확인하십시오. `Enable NFS` 그리고 `Allow NFS client access` .
+
image:automation-ora-c-series-nfs-svm-002.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."]

. NFS 내보내기 정책 추가 `Default` 규칙.
+
image:automation-ora-c-series-nfs-svm-003.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."]

. ~ 안에 `NETWORK INTERFACE` , NFS life 주소에 대한 각 노드의 IP 주소를 입력합니다.
+
image:automation-ora-c-series-nfs-svm-004.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."]

. Oracle용 SVM이 작동 중이고 NFS lifes 상태가 활성 상태인지 확인합니다.
+
image:automation-ora-c-series-nfs-svm-005.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."] image:automation-ora-c-series-nfs-svm-006.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."]

. 에서 `STORAGE-Volumes` Oracle 데이터베이스에 NFS 볼륨을 추가하려면 탭을 클릭하세요.
+
image:automation-ora-c-series-nfs-vol-001.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."]

. 볼륨에 이름을 지정하고, 용량과 성능 수준을 할당합니다.
+
image:automation-ora-c-series-nfs-vol-002.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."]

. ~ 안에 `Access Permission` , 이전 단계에서 만든 기본 정책을 선택합니다.  체크 해제 `Enable Snapshot Copies` 애플리케이션 일관성을 유지하는 스냅샷을 생성하기 위해 SnapCenter 사용하는 것을 선호하기 때문입니다.
+
image:automation-ora-c-series-nfs-vol-003.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."]

. 각 DB 서버에 대해 3개의 DB 볼륨을 만듭니다. server_name_u01 - 바이너리, server_name_u02 - 데이터, server_name_u03 - 로그.
+
image:automation-ora-c-series-nfs-vol-004.png["이 이미지는 C 시리즈 컨트롤러 구성에 대한 스크린샷을 제공합니다."]

+

NOTE: 자동화가 올바르게 작동하도록 하려면 DB 볼륨 명명 규칙은 위에 명시된 형식을 엄격히 따라야 합니다.



이것으로 Oracle용 C 시리즈 컨트롤러 구성이 완료되었습니다.

====


=== 자동화 매개변수 파일

[%collapsible%open]
====
Ansible 플레이북은 미리 정의된 매개변수를 사용하여 데이터베이스 설치 및 구성 작업을 실행합니다.  이 Oracle 자동화 솔루션의 경우 플레이북을 실행하기 전에 사용자 입력이 필요한 사용자 정의 매개변수 파일이 3개 있습니다.

* 호스트 - 자동화 플레이북이 실행되는 대상을 정의합니다.
* vars/vars.yml - 모든 대상에 적용되는 변수를 정의하는 전역 변수 파일입니다.
* host_vars/host_name.yml - 지정된 대상에만 적용되는 변수를 정의하는 로컬 변수 파일입니다.  우리의 사용 사례에서는 이는 Oracle DB 서버입니다.


이러한 사용자 정의 변수 파일 외에도 필요하지 않은 한 변경할 필요가 없는 기본 매개변수가 포함된 여러 가지 기본 변수 파일이 있습니다.  다음 섹션에서는 사용자 정의 변수 파일을 구성하는 방법을 보여줍니다.

====


=== 매개변수 파일 구성

[%collapsible%open]
====
. Ansible 대상 `hosts` 파일 구성:
+
[source, shell]
----
# Enter Oracle servers names to be deployed one by one, follow by each Oracle server public IP address, and ssh private key of admin user for the server.
[oracle]
ora_01 ansible_host=10.61.180.21 ansible_ssh_private_key_file=ora_01.pem
ora_02 ansible_host=10.61.180.23 ansible_ssh_private_key_file=ora_02.pem

----


. 글로벌 `vars/vars.yml` 파일 구성
+
[source, shell]
----
######################################################################
###### Oracle 19c deployment user configuration variables       ######
###### Consolidate all variables from ONTAP, linux and oracle   ######
######################################################################

###########################################
### ONTAP env specific config variables ###
###########################################

# Prerequisite to create three volumes in NetApp ONTAP storage from System Manager or cloud dashboard with following naming convention:
# db_hostname_u01 - Oracle binary
# db_hostname_u02 - Oracle data
# db_hostname_u03 - Oracle redo
# It is important to strictly follow the name convention or the automation will fail.


###########################################
### Linux env specific config variables ###
###########################################

redhat_sub_username: XXXXXXXX
redhat_sub_password: XXXXXXXX


####################################################
### DB env specific install and config variables ###
####################################################

# Database domain name
db_domain: solutions.netapp.com

# Set initial password for all required Oracle passwords. Change them after installation.
initial_pwd_all: XXXXXXXX

----


. 로컬 DB 서버 `host_vars/host_name.yml` ora_01.yml, ora_02.yml과 같은 구성
+
[source, shell]
----
# User configurable Oracle host specific parameters

# Enter container database SID. By default, a container DB is created with 3 PDBs within the CDB
oracle_sid: NTAP1

# Enter database shared memory size or SGA. CDB is created with SGA at 75% of memory_limit, MB. The grand total of SGA should not exceed 75% available RAM on node.
memory_limit: 8192

# Local NFS lif ip address to access database volumes
nfs_lif: 172.30.136.68

----


====


=== 플레이북 실행

[%collapsible%open]
====
자동화 툴킷에는 총 5개의 플레이북이 있습니다.  각각은 서로 다른 작업 블록을 수행하고 서로 다른 목적을 위해 사용됩니다.

....
0-all_playbook.yml - execute playbooks from 1-4 in one playbook run.
1-ansible_requirements.yml - set up Ansible controller with required libs and collections.
2-linux_config.yml - execute Linux kernel configuration on Oracle DB servers.
4-oracle_config.yml - install and configure Oracle on DB servers and create a container database.
5-destroy.yml - optional to undo the environment to dismantle all.
....
다음 명령을 사용하여 플레이북을 실행하는 세 가지 옵션이 있습니다.

. 모든 배포 플레이북을 한 번에 결합해서 실행합니다.
+
[source, cli]
----
ansible-playbook -i hosts 0-all_playbook.yml -u admin -e @vars/vars.yml
----
. 1~4까지의 숫자 순서대로 플레이북을 하나씩 실행합니다.
+
[source, cli]]
----
ansible-playbook -i hosts 1-ansible_requirements.yml -u admin -e @vars/vars.yml
----
+
[source, cli]
----
ansible-playbook -i hosts 2-linux_config.yml -u admin -e @vars/vars.yml
----
+
[source, cli]
----
ansible-playbook -i hosts 4-oracle_config.yml -u admin -e @vars/vars.yml
----
. 태그와 함께 0-all_playbook.yml을 실행합니다.
+
[source, cli]
----
ansible-playbook -i hosts 0-all_playbook.yml -u admin -e @vars/vars.yml -t ansible_requirements
----
+
[source, cli]
----
ansible-playbook -i hosts 0-all_playbook.yml -u admin -e @vars/vars.yml -t linux_config
----
+
[source, cli]
----
ansible-playbook -i hosts 0-all_playbook.yml -u admin -e @vars/vars.yml -t oracle_config
----
. 환경 실행 취소
+
[source, cli]
----
ansible-playbook -i hosts 5-destroy.yml -u admin -e @vars/vars.yml
----


====


=== 실행 후 검증

[%collapsible%open]
====
플레이북을 실행한 후 Oracle DB 서버 VM에 로그인하여 Oracle이 설치 및 구성되었고 컨테이너 데이터베이스가 성공적으로 생성되었는지 확인합니다.  다음은 DB VM ora_01 또는 ora_02에 대한 Oracle 데이터베이스 검증의 예입니다.

. NFS 마운트 검증
+
....

[admin@ora_01 ~]$ cat /etc/fstab

#
# /etc/fstab
# Created by anaconda on Wed Oct 18 19:43:31 2023
#
# Accessible filesystems, by reference, are maintained under '/dev/disk/'.
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.
#
# After editing this file, run 'systemctl daemon-reload' to update systemd
# units generated from this file.
#
/dev/mapper/rhel-root   /                       xfs     defaults        0 0
UUID=aff942c4-b224-4b62-807d-6a5c22f7b623 /boot                   xfs     defaults        0 0
/dev/mapper/rhel-swap   none                    swap    defaults        0 0
/root/swapfile swap swap defaults 0 0
172.21.21.100:/ora_01_u01 /u01 nfs rw,bg,hard,vers=3,proto=tcp,timeo=600,rsize=65536,wsize=65536 0 0
172.21.21.100:/ora_01_u02 /u02 nfs rw,bg,hard,vers=3,proto=tcp,timeo=600,rsize=65536,wsize=65536 0 0
172.21.21.100:/ora_01_u03 /u03 nfs rw,bg,hard,vers=3,proto=tcp,timeo=600,rsize=65536,wsize=65536 0 0


[admin@ora_01 tmp]$ df -h
Filesystem                 Size  Used Avail Use% Mounted on
devtmpfs                   7.7G     0  7.7G   0% /dev
tmpfs                      7.8G     0  7.8G   0% /dev/shm
tmpfs                      7.8G   18M  7.8G   1% /run
tmpfs                      7.8G     0  7.8G   0% /sys/fs/cgroup
/dev/mapper/rhel-root       44G   28G   17G  62% /
/dev/sda1                 1014M  258M  757M  26% /boot
tmpfs                      1.6G   12K  1.6G   1% /run/user/42
tmpfs                      1.6G  4.0K  1.6G   1% /run/user/1000
172.21.21.100:/ora_01_u01   50G  8.7G   42G  18% /u01
172.21.21.100:/ora_01_u02  200G  384K  200G   1% /u02
172.21.21.100:/ora_01_u03  100G  320K  100G   1% /u03

[admin@ora_02 ~]$ df -h
Filesystem                 Size  Used Avail Use% Mounted on
devtmpfs                   7.7G     0  7.7G   0% /dev
tmpfs                      7.8G     0  7.8G   0% /dev/shm
tmpfs                      7.8G   18M  7.8G   1% /run
tmpfs                      7.8G     0  7.8G   0% /sys/fs/cgroup
/dev/mapper/rhel-root       44G   28G   17G  63% /
/dev/sda1                 1014M  258M  757M  26% /boot
tmpfs                      1.6G   12K  1.6G   1% /run/user/42
tmpfs                      1.6G  4.0K  1.6G   1% /run/user/1000
172.21.21.101:/ora_02_u01   50G  7.8G   43G  16% /u01
172.21.21.101:/ora_02_u02  200G  320K  200G   1% /u02
172.21.21.101:/ora_02_u03  100G  320K  100G   1% /u03

....
. Oracle 리스너 검증
+
....

[admin@ora_02 ~]$ sudo su
[root@ora_02 admin]# su - oracle
[oracle@ora_02 ~]$ lsnrctl status listener.ntap2

LSNRCTL for Linux: Version 19.0.0.0.0 - Production on 29-MAY-2024 12:13:30

Copyright (c) 1991, 2022, Oracle.  All rights reserved.

Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=ora_02.cie.netapp.com)(PORT=1521)))
STATUS of the LISTENER
------------------------
Alias                     LISTENER.NTAP2
Version                   TNSLSNR for Linux: Version 19.0.0.0.0 - Production
Start Date                23-MAY-2024 16:13:03
Uptime                    5 days 20 hr. 0 min. 26 sec
Trace Level               off
Security                  ON: Local OS Authentication
SNMP                      OFF
Listener Parameter File   /u01/app/oracle/product/19.0.0/NTAP2/network/admin/listener.ora
Listener Log File         /u01/app/oracle/diag/tnslsnr/ora_02/listener.ntap2/alert/log.xml
Listening Endpoints Summary...
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=ora_02.cie.netapp.com)(PORT=1521)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcps)(HOST=ora_02.cie.netapp.com)(PORT=5500))(Security=(my_wallet_directory=/u01/app/oracle/product/19.0.0/NTAP2/admin/NTAP2/xdb_wallet))(Presentation=HTTP)(Session=RAW))
Services Summary...
Service "192551f1d7e65fc3e06308b43d0a63ae.solutions.netapp.com" has 1 instance(s).
  Instance "NTAP2", status READY, has 1 handler(s) for this service...
Service "1925529a43396002e06308b43d0a2d5a.solutions.netapp.com" has 1 instance(s).
  Instance "NTAP2", status READY, has 1 handler(s) for this service...
Service "1925530776b76049e06308b43d0a49c3.solutions.netapp.com" has 1 instance(s).
  Instance "NTAP2", status READY, has 1 handler(s) for this service...
Service "NTAP2.solutions.netapp.com" has 1 instance(s).
  Instance "NTAP2", status READY, has 1 handler(s) for this service...
Service "NTAP2XDB.solutions.netapp.com" has 1 instance(s).
  Instance "NTAP2", status READY, has 1 handler(s) for this service...
Service "ntap2_pdb1.solutions.netapp.com" has 1 instance(s).
  Instance "NTAP2", status READY, has 1 handler(s) for this service...
Service "ntap2_pdb2.solutions.netapp.com" has 1 instance(s).
  Instance "NTAP2", status READY, has 1 handler(s) for this service...
Service "ntap2_pdb3.solutions.netapp.com" has 1 instance(s).
  Instance "NTAP2", status READY, has 1 handler(s) for this service...
The command completed successfully
[oracle@ora_02 ~]$

....
. Oracle 데이터베이스 및 dNFS 검증
+
....

[oracle@ora-01 ~]$ cat /etc/oratab
#
# This file is used by ORACLE utilities.  It is created by root.sh
# and updated by either Database Configuration Assistant while creating
# a database or ASM Configuration Assistant while creating ASM instance.

# A colon, ':', is used as the field terminator.  A new line terminates
# the entry.  Lines beginning with a pound sign, '#', are comments.
#
# Entries are of the form:
#   $ORACLE_SID:$ORACLE_HOME:<N|Y>:
#
# The first and second fields are the system identifier and home
# directory of the database respectively.  The third field indicates
# to the dbstart utility that the database should , "Y", or should not,
# "N", be brought up at system boot time.
#
# Multiple entries with the same $ORACLE_SID are not allowed.
#
#
NTAP1:/u01/app/oracle/product/19.0.0/NTAP1:Y


[oracle@ora-01 ~]$ sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Thu Feb 1 16:37:51 2024
Version 19.18.0.0.0

Copyright (c) 1982, 2022, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.18.0.0.0

SQL> select name, open_mode, log_mode from v$database;

NAME      OPEN_MODE            LOG_MODE
--------- -------------------- ------------
NTAP1     READ WRITE           ARCHIVELOG

SQL> show pdbs

    CON_ID CON_NAME                       OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
         2 PDB$SEED                       READ ONLY  NO
         3 NTAP1_PDB1                     READ WRITE NO
         4 NTAP1_PDB2                     READ WRITE NO
         5 NTAP1_PDB3                     READ WRITE NO
SQL> select name from v$datafile;

NAME
--------------------------------------------------------------------------------
/u02/oradata/NTAP1/system01.dbf
/u02/oradata/NTAP1/sysaux01.dbf
/u02/oradata/NTAP1/undotbs01.dbf
/u02/oradata/NTAP1/pdbseed/system01.dbf
/u02/oradata/NTAP1/pdbseed/sysaux01.dbf
/u02/oradata/NTAP1/users01.dbf
/u02/oradata/NTAP1/pdbseed/undotbs01.dbf
/u02/oradata/NTAP1/NTAP1_pdb1/system01.dbf
/u02/oradata/NTAP1/NTAP1_pdb1/sysaux01.dbf
/u02/oradata/NTAP1/NTAP1_pdb1/undotbs01.dbf
/u02/oradata/NTAP1/NTAP1_pdb1/users01.dbf

NAME
--------------------------------------------------------------------------------
/u02/oradata/NTAP1/NTAP1_pdb2/system01.dbf
/u02/oradata/NTAP1/NTAP1_pdb2/sysaux01.dbf
/u02/oradata/NTAP1/NTAP1_pdb2/undotbs01.dbf
/u02/oradata/NTAP1/NTAP1_pdb2/users01.dbf
/u02/oradata/NTAP1/NTAP1_pdb3/system01.dbf
/u02/oradata/NTAP1/NTAP1_pdb3/sysaux01.dbf
/u02/oradata/NTAP1/NTAP1_pdb3/undotbs01.dbf
/u02/oradata/NTAP1/NTAP1_pdb3/users01.dbf

19 rows selected.

SQL> select name from v$controlfile;

NAME
--------------------------------------------------------------------------------
/u02/oradata/NTAP1/control01.ctl
/u03/orareco/NTAP1/control02.ctl

SQL> select member from v$logfile;

MEMBER
--------------------------------------------------------------------------------
/u03/orareco/NTAP1/onlinelog/redo03.log
/u03/orareco/NTAP1/onlinelog/redo02.log
/u03/orareco/NTAP1/onlinelog/redo01.log

SQL> select svrname, dirname from v$dnfs_servers;

SVRNAME
--------------------------------------------------------------------------------
DIRNAME
--------------------------------------------------------------------------------
172.21.21.100
/ora_01_u02

172.21.21.100
/ora_01_u03

172.21.21.100
/ora_01_u01


....
. Oracle Enterprise Manager Express에 로그인하여 데이터베이스를 검증하세요.
+
image:automation-ora-c-series-nfs-em-001.png["이 이미지는 Oracle Enterprise Manager Express의 로그인 화면을 제공합니다."] image:automation-ora-c-series-nfs-em-002.png["이 이미지는 Oracle Enterprise Manager Express의 컨테이너 데이터베이스 뷰를 제공합니다."] image:automation-ora-c-series-nfs-em-003.png["이 이미지는 Oracle Enterprise Manager Express의 컨테이너 데이터베이스 뷰를 제공합니다."]



====


=== SnapCenter 사용한 Oracle 백업, 복원 및 복제

[%collapsible%open]
====
NetApp C-Series에 배포된 Oracle 데이터베이스를 관리하기 위해 SnapCenter UI 도구를 권장합니다.  TR-4979를 참조하세요link:../oracle/aws-ora-fsx-vmc-guestmount.html#oracle-backup-restore-and-clone-with-snapcenter["게스트 마운트 FSx ONTAP 통해 AWS에서 VMware Cloud의 간소화된 자체 관리형 Oracle"^] 부분 `Oracle backup, restore, and clone with SnapCenter` SnapCenter 설정 및 데이터베이스 백업, 복원, 복제 워크플로우 실행에 대한 자세한 내용은 다음을 참조하세요.

====


== 추가 정보를 찾을 수 있는 곳

이 문서에 설명된 정보에 대해 자세히 알아보려면 다음 문서 및/또는 웹사이트를 검토하세요.

* link:https://www.netapp.com/pdf.html?item=/media/81583-da-4240-aff-c-series.pdf["NetApp AFF C 시리즈"^]
* link:https://docs.oracle.com/en/database/oracle/oracle-database/19/ladbi/deploying-dnfs.html#GUID-D06079DB-8C71-4F68-A1E3-A75D7D96DCE2["Oracle Direct NFS 배포"^]

